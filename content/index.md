<!-- .slide: data-background-image="/assets/you_shall_not.webp" -->

--

<!-- .slide: data-background-image="/assets/you_shall_not_password.webp" -->

---

![user](/assets/user.svg)
<!-- .element: class="svg-white" -->

> Welcome123

<img src="assets/arrow-down.svg" alt="arrow-down"/>
<!-- .element: style="width:50px" class="svg-white" -->

![website](/assets/website.svg)
<!-- .element: class="svg-white" -->

--

![developer](/assets/developer.svg)
<!-- .element: class="svg-white" -->

> Welcome123

<img src="assets/arrow-down.svg" alt="arrow-down"/>
<!-- .element: style="width:50px" class="svg-white" -->

![database](/assets/database.svg)
<!-- .element: class="svg-white" -->

--

![malicious-party](/assets/malicious_party.svg)
<!-- .element: class="svg-white" -->

> Welcome123

<img src="assets/arrow-up.svg" alt="arrow-up" style="width:50px;"/>
<!-- .element: style="width:50px" class="svg-white" -->

![database](/assets/database.svg)
<!-- .element: class="svg-white" -->
---

![user](/assets/user.svg)
<!-- .element: class="svg-white" -->

> Welcome123 ♻️

<img src="assets/arrow-down.svg" alt="arrow-down"/>
<!-- .element: style="width:50px" class="svg-white" -->

![website](/assets/website.svg)
<!-- .element: class="svg-white" -->

--

![developer](/assets/developer.svg)
<!-- .element: class="svg-white" -->

> `************`

<img src="assets/arrow-down.svg" alt="arrow-down" />
<!-- .element: style="width:50px" class="svg-white" -->

![encrypted-database](/assets/encrypted-database.svg)
<!-- .element: class="svg-white" -->

--

![malicious-party](/assets/malicious_party.svg)
<!-- .element: class="svg-white" -->

> Welcome123

<img src="assets/arrow-down.svg" alt="arrow-down"/>
<!-- .element: style="width:50px" class="svg-white" -->

![website](/assets/website.svg)
<!-- .element: class="svg-white" -->

---

![correct-horse-battery-staple](/assets/correct-horse-battery-staple.png)

--

![user](/assets/user.svg)
<!-- .element: class="svg-white" -->

> Correct Horse Battery Staple

<img src="assets/arrow-down.svg" alt="arrow-down" />
<!-- .element: style="width:50px" class="svg-white" -->

![website](/assets/website.svg)
<!-- .element: class="svg-white" -->

--

![developer](/assets/developer.svg)
<!-- .element: class="svg-white" -->

![forgot-password](/assets/forgot-password.svg)
![forgot-password](/assets/compliance.svg)
<!-- .element: class="svg-white" -->

> - Password forget flow
> - Password policies
> - Renewal of passwords
<!-- .element: class="svg-white" -->

[comment]: <> (Only icons or text?)

--

![malicious-party](/assets/malicious_party.svg)
<!-- .element: class="svg-white" -->

![phishing](/assets/phishing.svg)
![phishing](/assets/brute-force.svg)
<!-- .element: class="svg-white" -->

> - Phishing sites
> - Brute force
<!-- .element: class="fade-in" -->

[comment]: <> (Only icons or text?)

---

![leaked-passwords](/assets/leaked-passwords.png)

---

> What problem are we solving here?

--

![user](/assets/user.svg)
<!-- .element: class="svg-white" -->

> Frustrated

--

![developer](/assets/developer.svg)
<!-- .element: class="svg-white" -->

> Annoyed

--

![malicious-party](/assets/malicious_party.svg)
<!-- .element: class="svg-white" -->

> Will find a way to get your password!

---

### We are _sharing_ our _secret_!

---

## Lucien Immink

--

![lucien-immink](/assets/lucien-immink.webp)<!-- .element: class="circle" -->

--

Software Architect &</br>
Developer Advocate @ _iO_</br>
</br>
Google Developer Expert

---

<!-- .slide: data-background-image="/assets/doors_of_durin.webp" -->

---

## Mark van der Linden

--

![mark-van-der-linden](/assets/mark-van-der-linden.jpg)<!-- .element: class="circle" -->

--

Software Architect &</br>
Developer Advocate @ _iO_</br>

---

## Single Sign-on

![sso](/assets/sso.png)

--

<div>
  <img src="/assets/user.svg"> Login with a single click
</div><!-- .element: class="svg-flex svg-flex-start svg-white"-->

<div>
  <img src="/assets/developer.svg"> No complex security
</div><!-- .element: class="svg-flex svg-flex-start svg-white"-->

<div>
  <img src="/assets/malicious_party.svg"> Deal with big tech security
</div><!-- .element: class="svg-flex svg-flex-start svg-white"-->

--

<div>
  <img src="/assets/user.svg"> Privacy implications
</div><!-- .element: class="svg-flex svg-flex-start svg-white"-->

<div>
  <img src="/assets/developer.svg"> Deal with passwords
</div><!-- .element: class="svg-flex svg-flex-start svg-white"-->

<div>
  <img src="/assets/malicious_party.svg"> Steals passwords
</div><!-- .element: class="svg-flex svg-flex-start svg-white"-->

---

## 2 step verification

![2fa](/assets/2fa.webp)

--

<div>
  <img src="/assets/user.svg"> Familiar
</div><!-- .element: class="svg-flex svg-flex-start svg-white"-->

<div>
  <img src="/assets/developer.svg"> Easy to implement
</div><!-- .element: class="svg-flex svg-flex-start svg-white"-->

<div>
  <img src="/assets/malicious_party.svg"> Needs to steal a second credential
</div><!-- .element: class="svg-flex svg-flex-start svg-white"-->

--

<div>
  <img src="/assets/user.svg"> Doesn't enable it
</div><!-- .element: class="svg-flex svg-flex-start svg-white"-->

<div>
  <img src="/assets/developer.svg"> Still deal with passwords!
</div><!-- .element: class="svg-flex svg-flex-start svg-white"-->

<div>
  <img src="/assets/malicious_party.svg"> Phishing of password and code!
</div><!-- .element: class="svg-flex svg-flex-start svg-white"-->

---

## Passwordless

![magic-link](/assets/magic-link.svg)<!-- .element: class="svg-white svg-35" -->
![push-notification](/assets/push-notification.svg)<!-- .element: class="svg-white svg-35" style="margin-left: 2em" -->

--

<div>
  <img src="/assets/user.svg"> Easy to use
</div><!-- .element: class="svg-flex svg-flex-start svg-white"-->

<div>
  <img src="/assets/developer.svg"> No passwords to store
</div><!-- .element: class="svg-flex svg-flex-start svg-white"-->

<div>
  <img src="/assets/malicious_party.svg"> No passwords to steal
</div><!-- .element: class="svg-flex svg-flex-start svg-white"-->

--

<div>
  <img src="/assets/user.svg"> Additional service or app needed
</div><!-- .element: class="svg-flex svg-flex-start svg-white"-->

<div>
  <img src="/assets/developer.svg"> No standard way to implement
</div><!-- .element: class="svg-flex svg-flex-start svg-white"-->

<div>
  <img src="/assets/malicious_party.svg"> -
</div><!-- .element: class="svg-flex svg-flex-start svg-white"-->

---

### Two factor authentication

<img src="assets/password.svg" alt="password" style="width:150px;"/>
<!-- .element: class="svg-white fragment fade-in-then-semi-out" -->
<img src="assets/key.svg" alt="key" style="width:150px;"/>
<!-- .element: class="svg-white fragment fade-in" -->
<img src="assets/fingerprint.svg" alt="fingerprint" style="width:150px;"/>
<!-- .element: class="svg-white fragment fade-in" -->

---

<img src="/assets/fido-alliance.png" alt="fido-alliance" style="width:40%;"/>

> Reduce over-reliance on passwords
<!-- .element: class="fragment fade-in" -->

--

## FIDO Protocol

![yubi-key](/assets/yubi-key.png)<!-- .element: class="fragment fade-in" -->

--

## FIDO2 Protocol 

<div>
  <img src="assets/microsoft.svg" alt="microsoft" style="width:80px;"/>
  <img src="assets/google.svg" alt="google" style="width:80px;"/>
  <img src="assets/apple.svg" alt="apple" style="width:80px;"/>
  <img src="assets/firefox-browser.svg" alt="firefox" style="width:80px;"/>
</div>
<!-- .element: class="svg-white fragment fade-in-then-semi-out" -->

<div>
  <img src="assets/edge.svg" alt="edge" style="width:80px;"/>
  <img src="assets/chrome.svg" alt="chrome" style="width:80px;"/>
  <img src="assets/safari.svg" alt="safari" style="width:80px;"/>
  <img src="assets/firefox-browser.svg" alt="firefox" style="width:80px;"/>
</div>
<!-- .element: class="svg-white fragment fade-in-then-semi-out" -->

[comment]: <> (Maybe have the logo's of google, microsoft etc. change into the respective browsers)

--

<div>

<img src="assets/webauthentication.svg" alt="webauthentication" style="width:250px;"/>
<br />

##### Web Authentication (WebAuthn)

</div>

<div>

<img src="assets/ctap.png" alt="ctap" style="width:250px;"/>
<br />

##### Client to authenticator Protocol (CTAP)

</div>

--

<img src="assets/webauthentication.svg" alt="webauthentication" style="width:250px;"/>

> <div><img src="assets/standerdization.svg">Standard</div><!-- .element: class="svg-white svg-flex" -->

> <div><img src="assets/key-pair.svg">Public Key Cryptography</div><!-- .element: class="svg-white svg-flex"-->
<!-- .element: class="fragment fade-in" -->

--

Platform Authenticators

![platform-authenticators](/assets/platform-authenticators.svg)<!-- .element: class="svg-white svg-35" -->

--

Roaming Authenticators

![roaming-authenticators](/assets/roaming-authenticators.svg)<!-- .element: class="svg-white svg-35" -->

---

## Implementation

--

#### Registration

![registration](/assets/registration.webp)

--

### Backend

```xml
<dependency>
  <groupId>com.yubico</groupId>
  <artifactId>webauthn-server-core</artifactId>
  <version>2.0.0</version>
</dependency>
```

--

### Backend (2)

```java[1-4|6-9|11-17|18-23]
RelyingPartyIdentity rpIdentity = RelyingPartyIdentity.builder()
    .id("iodigital.com") 
    .name("iO Application")
    .build();

RelyingParty rp = RelyingParty.builder()
    .identity(rpIdentity)
    .credentialRepository(new MyCredentialRepository())
    .build();

byte[] userHandle = new byte[64];
random.nextBytes(userHandle);
UserIdentity user = UserIdentity.builder()
  .name("mark")
  .displayName("Mark van der Linden")
  .id(new ByteArray(userHandle))
  .build();

PublicKeyCredentialCreationOptions request = 
  rp.startRegistration(StartRegistrationOptions.builder()
    .user(user)
    .build());
return request.toCredentialsCreateJson();
```

--

### Backend (3)

```json[2-5|6-10|11|12|13]
{
  "rp": {
    "name": "iO Application",
    "id": "iodigital.com"
  },
  "user": {
    "name": "mark",
    "displayName": "Mark van der Linden",
    "id": "Ve_TC1ROGx8gxgqIXg4QK_HdNgYA1DueCk76aJQeOGn1Ig3Q9NNQJSlmN54xabrWu3qGye-8i7lfW4tscEDMvw"
  },
  "challenge": "XAwA8V0uAKIw8E14qLZhpmPpzQHB8TawyCObc5ps_eo",
  "pubKeyCredParams": [{alg: -7, type: "public-key"}],
  "timeout": 60000
}
```

--

### Frontend

```js[2-13|16-18]
const publicKeyCredentialCreationOptions = {
    challenge: "XAwA8V0uAKIw8E14qLZhpmPpzQHB8TawyCObc5ps_eo",
    rp: {
        name: "iO",
        id: "iodigital.com",
    },
    user: {
      "name": "mark",
      "displayName": "Mark van der Linden",
      "id": "Ve_TC1ROGx8gxgqIXg4QK_HdNgYA1DueCk76aJQeOGn1Ig3Q9NNQJSlmN54xabrWu3qGye-8i7lfW4tscEDMvw"
    },
    pubKeyCredParams: [{alg: -7, type: "public-key"}],
    timeout: 60000
};

const publicKeyCredentialJson = await navigator.credentials.create({
    publicKey: publicKeyCredentialCreationOptions
});
```

--

### Backend (4)

```java[1|2-3|5-9|7|8|11]
String publicKeyCredentialJson = /* ... */; 
PublicKeyCredential pkc = PublicKeyCredential
  .parseRegistrationResponseJson(publicKeyCredentialJson);

RegistrationResult result = rp.finishRegistration(
  FinishRegistrationOptions.builder()
    .request(request)
    .response(pkc)
    .build());

ByteArray publicKey = result.getPublicKeyCose();
```

--

### Authentication

![authentication](/assets/authentication.webp)<!-- .element: style="max-width: 53%" -->

--

## Backend

```java[1-4|6]
AssertionRequest request = rp.startAssertion(
  StartAssertionOptions.builder()
    .username("mark")
    .build());

return request.toCredentialsGetJson();
```

--

### Backend (2)

```json[2|3|4-8|9]
{
  "challenge": "XAwA8V0uAKIw8E14qLZhpmPpzQHB8TawyCObc5ps_eo",
  "rpId": "iodigital.com",
  "allowCredentials": [{
    "transports": "usb",
    "type": "public-key",
    "id": "******"
  }],
  "timeout": 60000
}
```

--

### Frontend

```js[2-10|12-14]
const publicKeyCredentialRequestOptions = {
    challenge: "XAwA8V0uAKIw8E14qLZhpmPpzQHB8TawyCObc5ps_eo",
    rpId: "iodigital.com",
    allowCredentials: [{
      transports: "usb",
      type: "public-key",
      id: "******"
    }],
    timeout: 60000
}

const credential = await navigator.credentials.get({
    publicKey: publicKeyCredentialRequestOptions
});
```

--

## Backend (3)

```java[1|2-3|5-9|11-12]
String publicKeyCredentialJson = /* ... */;
PublicKeyCredential pkc = PublicKeyCredential
  .parseAssertionResponseJson(publicKeyCredentialJson);

AssertionResult result = rp.finishAssertion(
  FinishAssertionOptions.builder()
    .request(request)
    .response(pkc)
    .build());

boolean success = result.isSuccess();
String username = result.getUsername();
```

---

### Laptop as authenticator

<img src="assets/laptop.svg" alt="laptop" style="width:250px;"/>
<!-- .element: class="svg-white" -->

--

<iframe style="width:100%; height:500px;" data-src="auth/admin/master/console/" data-preload></iframe>

--

### Phone as authenticator

<img src="assets/laptop-mobile.svg" alt="laptop-mobile" style="width:250px;"/>
<!-- .element: class="svg-white" -->

--

[comment]: <> (Registration and authentication via laptop)

<iframe style="width:100%; height:400px;" data-src="auth/realms/master/account/" data-preload></iframe>
<io-webcam-view style="display: inline-block; width: 400px;" width="720" height="400">
  webcam view
</io-webcam-view>

--

### Phone as authenticator

<img src="assets/mobile.svg" alt="mobile" style="width:250px;"/>
<!-- .element: class="svg-white" -->

--

[comment]: <> (authentication via phone)

<io-webcam-view style="display: inline-block;" width="720" height="400">
  webcam view
</io-webcam-view>

---

## So...

--

<div>
  <img src="/assets/user.svg"> Reduce relience on passwords!
</div><!-- .element: class="svg-flex svg-flex-start svg-white"-->

<div>
  <img src="/assets/developer.svg"> Enable Web Authentication!
</div><!-- .element: class="svg-flex svg-flex-start svg-white"-->

<div>
  <img src="/assets/malicious_party.svg"> Steal those public keys!
</div><!-- .element: class="svg-flex svg-flex-start svg-white"-->

and<!-- .element: class="fragment"--> 
---

<!-- .slide: data-background-image="/assets/keep_your_secrets.webp" -->
